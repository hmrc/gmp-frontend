@*
 * Copyright 2022 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@import config.ApplicationConfig
@import views.OldViewHelpers
@import uk.gov.hmrc.govukfrontend.views.html.components._

@this(gmpMain: gmp_main_old, viewHelpers: OldViewHelpers,  govukButton: GovukButton, govukDateInput: GovukDateInput, govukErrorMessage: GovukErrorMessage,
        govukErrorSummary: GovukErrorSummary)

@(revaluationForm: Form[models.RevaluationDate])(implicit request: Request[_], messages: Messages, ac:ApplicationConfig)

@implicitFormInstance = @{ Some(revaluationForm) }

@gmpMain(title = Messages("gmp.revaluation.question")+ " - " + Messages("service.title") + " - " + Messages("gov.uk")) {

@includes.back_link(Messages("gmp.revaluation.question"))

<h1>@Messages("gmp.revaluation.question")</h1>


    @viewHelpers.form(action = routes.RevaluationController.post) {


@*            @views.html.helpers.groupError(revaluationForm("revaluationDate"))*@
@*              @if(revaluationForm.hasGlobalErrors) {*@
@*                @revaluationForm.globalErrors.zipWithIndex.map { case (error, index) =>*@
@*                    <span style="display: block" class="govuk-error-message" id="global-error-@index">@error.message</span>*@
@*                }*@
@*              }*@

        @govukDateInput(DateInput(
            id = "revaluationDate",
            hint = Some(Hint(
                content = Text(Messages("gmp.date.example"))
            )),
            errorMessage = revaluationForm.errors.headOption.map(e => ErrorMessage(content = Text(messages(e.message, e.args:_*)))),
            items = Seq(
                InputItem(name = "revaluationDate.day", classes = "govuk-input--width-2", label=Some("Day"), value = revaluationForm.data.get("revaluationDate.day")),
                InputItem(name = "revaluationDate.month", classes = "govuk-input--width-2", label=Some("Month"), value = revaluationForm.data.get("revaluationDate.month")),
                InputItem(name = "revaluationDate.year", classes = "govuk-input--width-4", label=Some("Year"), value = revaluationForm.data.get("revaluationDate.year"))),
            fieldset = Some(Fieldset(
                legend = Some(Legend(
                    content = Text(Messages("gmp.date.header_text")),
                    classes = "govuk-fieldset__legend--m",
                    isPageHeading = false
                ))
            ))
        ))

@*            <fieldset id="revaluationDate">*@

@*                <legend id="reval-date" class="govuk-visually-hidden">*@
@*                    @Messages("gmp.revaluation.question")*@
@*                </legend>*@

@*                <div class="form-group">*@
@*                    @gmpInput(revaluationForm("revaluationDate.day"),*@
@*                    '_label -> Html(Messages("gmp.day")),*@
@*                    '_id -> "revaluationDate-day",*@
@*                    '_maxLength -> 2)*@
@*                </div>*@
@*                <div class="form-group">*@
@*                    @gmpInput(revaluationForm("revaluationDate.month"),*@
@*                    '_label -> Html(Messages("gmp.month")),*@
@*                    '_id -> "revaluationDate-month",*@
@*                    '_maxLength -> 2)*@
@*                </div>*@
@*                <div class="form-group">*@
@*                    @gmpInput(revaluationForm("revaluationDate.year"),*@
@*                    '_label -> Html(Messages("gmp.year")),*@
@*                    '_id -> "revaluationDate-year",*@
@*                    '_maxLength ->4,*@
@*                    '_inputClass -> "form-control year-input")*@
@*                </div>*@
@*                <hr class="govuk-section-break" aria-hidden = true>*@
@*                <hr class="govuk-section-break" aria-hidden = true>*@
@*                <hr class="govuk-section-break" aria-hidden = true>*@

@*            </fieldset>*@



@*        <!-- hidden part of form -->*@
@*          <input type="hidden" id="leavingDate_day" name="leaving.leavingDate.day" value="@revaluationForm("leaving.leavingDate.day").value"/>*@
@*          <input type="hidden" id="leavingDate_month" name="leaving.leavingDate.month" value="@revaluationForm("leaving.leavingDate.month").value"/>*@
@*          <input type="hidden" id="leavingDate_year" name="leaving.leavingDate.year" value="@revaluationForm("leaving.leavingDate.year").value"/>*@
@*          <input type="hidden" id="leavingText" name="leaving.leaving" value="@revaluationForm("leaving.leaving").value"/>*@
@*        <!-- hidden part of form -->*@

        @govukButton(Button(content = Text(messages("gmp.continue.button"))))

    }

}